{% extends 'base.html' %}
{% load static %}

{% block content %}
<article class="min-h-screen py-16">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl">
    <!-- Back Button -->
    <div class="mb-8">
      <a href="{% url 'domain_finder:blog_list' %}" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2">
        <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <line x1="19" y1="12" x2="5" y2="12"></line>
          <polyline points="12,19 5,12 12,5"></polyline>
        </svg>
        Back to Blog
      </a>
    </div>

    <!-- Article Header -->
    <header class="mb-8">
      <div class="mb-4">
        <div class="inline-flex items-center whitespace-nowrap rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 mb-4">
          {{ post.category.name }}
        </div>
      </div>
      
      <h1 class="text-3xl lg:text-4xl font-bold mb-6 leading-tight">
        {{ post.title }}
      </h1>
      
      <div class="flex flex-wrap items-center gap-6 text-sm text-muted-foreground mb-6">
        <div class="flex items-center space-x-2">
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
          <span>{{ post.author.name }}</span>
        </div>
        <div class="flex items-center space-x-2">
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
            <line x1="16" y1="2" x2="16" y2="6"></line>
            <line x1="8" y1="2" x2="8" y2="6"></line>
            <line x1="3" y1="10" x2="21" y2="10"></line>
          </svg>
          <span>{{ post.formatted_date }}</span>
        </div>
        <div class="flex items-center space-x-2">
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12,6 12,12 16,14"></polyline>
          </svg>
          <span>{{ post.read_time }}</span>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex items-center space-x-4 mb-8">
        <button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3">
          <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <circle cx="18" cy="5" r="3"></circle>
            <circle cx="6" cy="12" r="3"></circle>
            <circle cx="18" cy="19" r="3"></circle>
            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
          </svg>
          Share
        </button>
        <button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 rounded-md px-3">
          <svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path d="m19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"></path>
          </svg>
          Save
        </button>
      </div>
    </header>

    <!-- Featured Image -->
    <div class="mb-8">
      <div class="aspect-video rounded-lg overflow-hidden">
        <img src="{{ post.image_url }}" alt="{{ post.title }}" class="w-full h-full object-cover" />
      </div>
    </div>

    <!-- Article Content -->
    <div class="rounded-lg border bg-card text-card-foreground shadow-sm mb-12">
      <div class="p-8 lg:p-12">
        <div class="prose prose-gray max-w-none">
          <div class="text-lg leading-relaxed mb-8 text-muted-foreground">
            {{ post.excerpt }}
          </div>
          <div class="article-content space-y-6" style="line-height: 1.7;">
            {{ post.content_as_markdown|safe }}
          </div>
        </div>
      </div>
    </div>

    <!-- Author Bio -->
    <div class="rounded-lg border bg-card text-card-foreground shadow-sm mb-12">
      <div class="p-8">
        <div class="flex items-start space-x-4">
          {% if post.author.display_avatar %}
          <div class="w-16 h-16 rounded-full overflow-hidden">
            <img src="{{ post.author.display_avatar }}" 
                 alt="{{ post.author.name }}" 
                 class="w-full h-full object-cover"
                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
            <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center" style="display: none;">
              <svg class="h-8 w-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </div>
          </div>
          {% else %}
          <div class="w-16 h-16 bg-primary rounded-full flex items-center justify-center">
            <svg class="h-8 w-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </div>
          {% endif %}
          <div class="flex-1">
            <h3 class="font-semibold mb-2">About {{ post.author.name }}</h3>
            <p class="text-muted-foreground">
              {{ post.author.display_bio }}
            </p>
          </div>
        </div>
      </div>
    </div>

    {% if related_posts %}
    <!-- Related Articles -->
    <div class="border-t pt-12">
      <h3 class="text-2xl font-bold mb-8">Related Articles</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% for related_post in related_posts %}
        <div class="rounded-lg border bg-card text-card-foreground shadow-sm hover:shadow-lg transition-shadow">
          <a href="{{ related_post.get_absolute_url }}">
            <div class="aspect-video">
              <img src="{{ related_post.image_url }}" alt="{{ related_post.title }}" class="w-full h-full object-cover rounded-t-lg" />
            </div>
            <div class="p-6">
              <div class="inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground mb-2">
                {{ related_post.category.name }}
              </div>
              <h4 class="font-semibold mb-2 leading-tight">
                {{ related_post.title }}
              </h4>
              <p class="text-sm text-muted-foreground mb-4">
                {{ related_post.excerpt|truncatechars:100 }}
              </p>
              <div class="flex items-center space-x-4 text-xs text-muted-foreground">
                <span>{{ related_post.author.name }}</span>
                <span>{{ related_post.read_time }}</span>
              </div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
</article>
{% endblock %}